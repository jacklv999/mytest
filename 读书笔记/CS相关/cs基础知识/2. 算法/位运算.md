## 位运算

#### 编码

最朴素的编码方式为原码，即正数二进制表示，负数首位取1。但是存在两个问题：

- 正负数相加不等于0
- 0存在两种表达方式（0000，1000）

于是，存在反码，即正数不变，负数除首位外取反。可以解决正负数相加不为0的情况，但是仍未解决第二个问题。补码的出现解决了第二个问题，即正数原码不变，负数为反码最低位补1.

> 原码：
> 00000011	# +3
> 10000011    # -3
>
> 反码：
> 00000011	 #+3
> 11111100	 # -3
>
> 补码：
> 00000011	 #+3
> 11111101	 # -3

在现代计算机中，数据都以补码方式存储

#### 位运算

##### 1. 与

参加运算的两数据,按二进制位进行"与"运算.

运算规则：`0&0=0  0&1=0  1&0=0  1&1=1`. 

- 判断奇偶

  ```python
  N&1
  # XXXX & 0001
  ```

  因为偶数最低位为0，奇数为1

##### 2. 或

按位或运算，只要对应两个二进制位有一个为1时，结果就为1。也就是说：`1|1=1，1|0=1，0|1=1，0|0=0`.

- 对二进制补1

  ```python
  将X=10100000的低4位置1，
  用 X|0000 1111 = 1010 1111
  ```

##### 3. 异或

按位异或运算符，当两个对应的二进位相异时，结果为1，也就是说：`1^1=0, 1^0=1, 0^1=1, 0^0=0`.

特点：

- 相同两数异或为0；
- 0与任何数异或为该数。

作用

- 找出仅出现一次的数字

##### 4. 取反

按位取反运算符，对数据的每个二进制位取反，即把1变为0，把0变为1

```python
~n = -(n+1)
~-n = n-1
```

##### 5. 左移

左移动运算符，运算数的各二进制位全部左移若干位，而 `<<` 右边的数字指定了移动的位数，高位丢弃，低位补0.

- 左移相当于数字乘以2

  ```python
  1<<1#2
  2<<1#4
  ```

##### 6. 右移

右移动运算符，把`>>`左边的运算数的各二进制位全部右移若干位，`>>` 右边的数字指定了移动的位数.

- 右移相当于除以2，且向下取整

  ```python
  2>>1#1
  3>>1#1
  ```