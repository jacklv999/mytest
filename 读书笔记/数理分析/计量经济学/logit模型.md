# logit模型

### 1.二元logit模型

对二元模型, 我们引入新的概念 Odds, 定义为 $$Odds = \frac{P}{1-P}$$ . 对二元关系进行建模有: 

### $\frac{P}{1-P} = \beta_0 + \beta_1X + u$ 

但是因为 $P$ 的非负性, 所以模型的拟合值只能是在正数域, 为了扩展拟合区域至整个实数域, 我们可以改写方程为: 

### $\ln(\frac{P}{1-P}) = \beta_0 + \beta_1X + u$ 

### 2.多元logit模型

在多元选择模型中logit模型比pobit模型应用更加广泛, 主要原因在于:

- 1.Probit模型需要对多元正态分布的整体进行评价, 因此使用受到限制
- 2.logit分布更适合用于效用最大化的分布选择
- 3.logit模型的似然函数更容易计算

模型分为两类: 名义响应变量模型和有序变量模型

1. ##### 对名义变量模型

    多采用把每类变量与一个基线变量配对, 通常取最后一类为参照类, 称为基线-类别logit模型:

    ### $\ln(\frac{P_i}{P_n}) = \beta_{0i} + \beta_{1i}X + u$ 

    建立 $n$ 个方程, 求解出 $n$ 组参数

2. ##### 对有序变量类型

    有序变量的赋值常以序数0,1,2,3等表示, 所以有序变量的logit回归模型定义为: 

    ### $ Logit(P(y>i|x)) =  -\alpha_i + \sum_{i=1}^{h}\beta_iX_i$ 

    

## Tobit模型 

指存在因变量在一定范围内大致连续, 但在范围外存在截断的模型, 常见的因变量类型如医疗支出, 考试分数等情况. Tobit模型的方程为:

### $y^* = \beta_0 + \beta_1X + u$

### $\begin{cases} y = y*    &\text{y<L}  \\y = 0 &\text{y>=L}        \end{cases}$ 



## 泊松回归    

用于描述单位时间、单位面积或者单位容积内某事件发现的频数分布情况，通常用于描述稀有事件（即小概率）事件发生数的分布, 如每小时内的车流量, 每天内办理某种服务的人数. 该类事件的特点是: 低概率性，以及单位时间(或面积、体积)内的数量。通常情况下，满足以下三个条件时，可认为数据满足Poisson分布：

**(1) 平稳性：**发生频数的大小，只与单位大小有关系（比如1万为单位，或者100万为单位时患癌症人数不同）；

**(2) 独立性：**发生频数的大小，各个数之间没有影响关系，即频数数值彼此独立没有关联关系；

**(3) 普通性：**发生频数足够小，即低概率性。

如果数据符合这类特征时，而又想研究X对于Y的影响；此时则需要使用Poisson回归(实践中可以使用Poisson检验) , 其方程如下: 

### $\log(E(Y|X)) = \alpha + \beta'X$

举例来说: 如果是比例数据, 在R语言中代码为:

```R
glm(y ~ x,family=poisson(link=log) )
glm(y~offset(log(exposure))+x,family=poisson(link=log) )
```



## 偏最小二乘回归法

偏最小二乘用于查找两个矩阵（*X*和*Y*）的基本关系，即一个在这两个空间对协方差结构建模的隐变量方法。偏最小二乘模型将试图找到*X*空间的多维方向来解释*Y*空间方差最大的多维方向。偏最小二乘回归特别适合当预测矩阵比观测的有更多变量，以及*X*的值中有多重共线性的时候。

### $X= TP^T + E$

### $Y = UQ^T + F$ 



## 秩和检验

秩和检验是通过将所有观察值（或每对观察值差的绝对值）按照从小到大的次序排列，每一观察值（或每对观察值差的绝对值）按照次序编号，称为秩（或秩次）。对两组观察值（配对设计下根据观察值差的正负分为两组）分别计算秩和进行检验。除了比较各对数据差的符号外，这种方法还进一步比较了各对数据差值大小的秩次高低，因此其检验效率较符号检验为高.



## 格兰杰因果检验 

在时间序列情形下，两个经济变量X、Y之间的格兰杰因果关系定义为：**若在包含了变量X、Y的过去信息的条件下，对变量Y的预测效果要优于只单独由Y的过去信息对Y进行的预测效果**，即变量X有助于解释变量Y的将来变化，则认为变量X是引致变量Y的格兰杰原因。

进行格兰杰因果关系检验的一个前提条件是时间序列必须具有平稳性，否则可能会出现虚假回归问题。因此在进行格兰杰因果关系检验之前首先应对各指标时间序列的平稳性进行单位根检验(unit root test)。常用增广的迪基—富勒检验(ADF检验)来分别对各指标序列的平稳性进行单位根检验。

格兰杰因果关系检验假设了有关y和x每一变量的预测的信息全部包含在这些变量的时间序列之中。检验要求估计以下的回归：

### $y_i = \sum_{i-1}^q\alpha_ix_{t-1} + \sum_{j-1}^q\beta_jy_{t-j} + u_{it}$ 

### $x_i = \sum_{i-1}^s\lambda_tx_{t-i} + \sum_{j-1}\delta_jy_{t-j} + u_{it}$ 

对式(1), 零假设 $H_0$ 为: $\alpha_1 = \alpha_2 = ...=\alpha_q = 0$

对式(2), 零假设 $H_0$ 为: $\delta_0 = \delta_1=...=\delta_s = 0$ 

分四种情况讨论:

- 1.X是引起Y的原因: 式(1)中X系数不显著, 式(2)中滞后Y系数显著为0
- 2.Y是引起X的原因: 式(2)滞后Y系数显著不为0, 式(1)滞后X系数显著为0
- 3.X与Y互为因果: 式(1)滞后X与式(2)滞后Y系数均显著不为0
- 4.X与Y独立: 式(1)滞后X与式(2)滞后Y均显著为0

## 协整检验

1、当你的数据时间维度t比较长的，一定要先做单位根检验，避免出现伪回归问题。

2、如果变量都拒绝了单位根存在的原假设，说明数据都是平稳的(0阶单整)，无需再进行协整检验。

协整检验是数据不平稳但是同阶单整的前提下，检验变量X与变量y之间是否存在长期均衡关系。

之所以这么麻烦，是因为时间序列数据进行回归，很容易出现虚假回归的问题，就是两个完全没有因果关系的变量，会因为都随时间t的增加而增加，呈现出相关。这样的回归是没有任何意义的，所以一定要确保数据平稳再建模。但是现实中不平稳的时间序列数据多了去了，然后格兰杰又想出能不能放松平稳性的假定，就提出了协整这一概念。



## Pearson相关

一般情况下, 在数据标准化（  $\mu = 0, \sigma = 1$ ）后，Pearson相关性系数、Cosine相似度、欧式距离的平方可认为是等价的, 公式表示为: 

### $\rho_{x,y} = \frac{cov(x,y)}{\sigma_X\sigma_y}  $ 

假设条件: 

-  1.两个变量服从正态分布
- 2.两个变量的标准差不为0

结论: pearson 描述的是线性相关关系，取值[-1, 1]。负数表示负相关，正数表示正相关。在显著性的前提下，绝对值越大，相关性越强。绝对值为0， 无线性关系；绝对值为1表示完全线性相关。

## sperman等级相关

### $\rho = 1-\frac{\sigma \sum_{i=1}^N(x_i-y_i)^2}{N(N^2-1)}$ 

结论：无参数的等级相关系数，亦即其值与两个相关变量的具体值无关，而仅仅与其值之间的大小关系有关。N表示N个样本，减少异常值的影响。

## kendall秩相关

结果：属于等级相关系数。排序一致，则为1， 排序完全相反则为-1。



