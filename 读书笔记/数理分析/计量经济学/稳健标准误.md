## 稳健标准误

为了理解聚类稳健标准误，需要大致了解目前解决标准误不足，发展了哪些方法。为了解决这一问题， 找到一致标准误consistent standard errors，目前总共4个方法

1）首先是稳健标准误(robust standard error)，**残差-- 基础模型**

Eicker–Huber–White通过三明治矩阵，最早确立，R中sandwich包，Stata中Robust。稳健标准误也被称为White’s standard errors，或者添加其他二者名字。

简单来说还是最小二乘方法的优化，通过改进OLS中协方差矩阵，考虑有异方差、无自相关情况。获得Heteroscedasticity-consistent异方差一致标准误。 后续发展有加权最小二乘WLS， 可行加权最小二乘(Feasible WLS) FWLS。

这个算是比较普遍的应用方式，正如同OLS一样，如果样本量特别大比较有效。

2）其次是聚类标准误（cluster robust standard error），**残差--自相关**

允许组别间存在异方差，每个组内部聚类减少方差的方法。 但是注意，这一方法既然允许了组别异方差，**有一个重要假设，那就是cluster数量趋近无穷，才会达成consistent。**

对于固定效应fixed effect数据适合， 也就是考虑一个企业不同时间点相关性，同一个体不同时期扰动项自相关。（这个聚类其实个体、时间都可以，但是通常panel 里面时间点较少，所以默认是用来处理个体相关。 注意聚类一个，另一个就默认存在异方差）

3）广义线性估计(GLS) 和 Fama-MacBeth， **残差 ---时间相关**

残差时间相关恒定， 采取广义线性估计(GLS) 方法，处理横截面数据。假定残差的时间相关可以长时间持续下去。

残差时间消退，采取 Fama-MacBeth 两阶段回归法来估计标准误, 先对个体的时间序列进行回归，得到beta系数后，再将beta系数作为已知变量再进行横截面数据的回归。第一步看其他变量因素，第二步回归就是时间因素。

4）综合方法， **残差 ---个体自相关与时间相关**

综合考虑时间相关与个体自相关， 研究中一般：对时间取虚拟变量，然后做个体的聚类标准误。    因为面板数据通常个体非常多，但时间点较少不足以聚类。

如果个体很多，时间点也特别多。那么也可以对个体与时间都 采用 聚类分析，公式如下
$$
V_{ind/time} = V_{ind}+V_{time}-V_{white}
$$
其中 $V_{white}$ 表示三明治矩阵中的Robust标准误



同时运行 Pool, fixed effects and random effects模型

均使用聚类稳健标准误

##### 对不同面板模型的使用

检验固定效应是否显著，采用F检验（对比模型是pooled）；

检验随机效应是否显著，采用LM检验（对比模型也是pooled）；

检验固定和随机哪个更适用，采用Hausman检验（对比fe和be）。